# README - Cabbage Shooter

---

## 1. Автор

`Лившиц Леонид Игоревич, БПИ 235`

---

## 2. Описание алгоритмов генерации комнат и их содержимого

1. **Инициализация уровня**

   * В Blueprint `Generator`  при `BeginPlay` запускается логика генерации. Параметр `Count of Rooms` задаёт число арен, у меня - 15.

2. **Формирование пула и выбор комнат**

   * `Generator` содержит массив `Rooms` - пул типов комнат (Blueprint классов). Из пула выбирается случайная комната с помощью `Array_Random` и спавнится на очередной позиции. Это повторяется пока не набрано требуемое количество комнат.

3. **Параметры конкретной комнаты**

    * Каждая сгенерированная комната (наследник `BaseRoom`) содержит компоненты:

     * стрелы, в каком направлении можно генерить комнаты
     * `Scene Mob` - место для появления моба.
     * `Point Shop` - место для потенциального появления торгового автомата.
     * `Left Portal и Right Portal` - места для потенциального появления порталов.

    * Комната `Base_Room_Child_straight` содержит сцену лазера, который убивает игрока.

4. **Спавн врагов и торгового автомата**

   * После спавна комнаты в неё могут добавиться двери с оперделеннм шансом, за каждой дверью 100% есть моб или босс.
   * В `Generator` есть кастомное событие `spawn shop`, которое спавнит автомат в комнате с дверью (и, соотвественно, мобом) на специальной точке, в автомате можно купить здоровь е или пули в MaxBullets

5. **Порталы между уровнями**

   * После очистки арены появляются два портала (обычный/сложный). Переход идёт по выбранному порталу к следующему уровню, сложный уровеньь содержит больше мобов в комнатах.

6. **Финальная комната**

   * Последний уровень - босс. После его уничтожения игра завершается.

---

## 3. Принцип изменения уровня сложности

Сложность комнаты регулируется набором параметров:

* **Количество врагов** - в сложной комнате больше единиц.
* **Атрибуты врагов** - увеличенный урон
* Все перечисленные значения централизованы в виде интерфейсов, у каждого уроня свой генератор, где можно указать эти параметры.

---

## 4. Описание реализованных дополнительных механик

### 4.1 Лазерная ловушка

* **Поведение:** лазер - компонент сцены в комнате (`Laser Scene`), движется по траектории Timeline и при коллизии с игроком убивает его.
* **Реализация в блюпринтах:**

  * В `BaseRoom_Child_straight` используется переменная `Laser Scene`. Через Timeline вызывается для перемещения компонента.
  * На компоненте лазера есть Line Trace, out hit on player убивает игрока.

### 4.2 Бафф на скорость

* **Реализация:**

  * При убийстве моба с определенным шансом выпадает и может увеличить скорость в 2 раза на этом уровне

---

## 5. Ссылки на внешние проекты, части которых использованы (и что именно взято/почему/что изменено)

1. **Fighter Drone** - `https://unrealengine.monster/fighter-drone-all-ver/`

   * **Что взял:** 3D-модель охранного дрона, анимации, базовые материалы.
   * **Почему:** быстрый старт с готовой анимированной моделью для стандартного врага.
   * **Что изменил/адаптировал:** в блюпринтах врага подключены собственные компоненты (health, damage), модель просто заменяет визуал, АИ мой.

2. **Sci-fi Drone 01 (5.0+)** - `https://unrealengine.monster/sci-fi-drone-01-5-0/`

   * **Что взял:** модель и материалы для босса.
   * **Почему:** визуально и по масштабу подходит на роль босса с большим HP, опять же, для скорости разработки, ну и он очень красивый.
   * **Что изменил/адаптировал:** в блюпринтах врага подключены собственные компоненты (health, damage), модель просто заменяет визуал, АИ мой.